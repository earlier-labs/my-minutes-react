function rgbToHex(a){if(a==null)return!1;var b=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(b==null)return"#FFFFFF";delete b[0];for(var c=1;c<=3;++c){b[c]=parseInt(b[c]).toString(16);b[c].length==1&&(b[c]="0"+b[c])}return"#"+b.join("")}function base_map(){var a=$("#map").attr("data-lat"),b=$("#map").attr("data-long"),c=$("#map").attr("data-zoom");typeof a=="undefined"&&(a="14.26438308756265");typeof b=="undefined"&&(b="100.1953125");typeof c=="undefined"&&(c=15);var d=new GMaps({div:"#map",lat:a,lng:b,zoom:c,mapTypeControl:!1,markers:[{lat:a,lng:b}]});d.addMarker({lat:a,lng:b})}function base_toggle(){$(".toggle .tab").click(function(){$(this).toggleClass("active");$(this).siblings(".pane").slideToggle(100,"linear")})}function base_tab(){$(".tabs-wrap").each(function(){var a=$(".tabs-wrap");$(".tabs li",a).click(function(b){b.preventDefault();$(".tabs a",a).removeClass("current");$("a",this).addClass("current");$(".panes .pane",a).hide();$(".panes .pane",a).eq($(this).index()).show()});var b=parseInt($(this).attr("data-initial-tab"),10);$(".tabs li",a).eq(b).trigger("click")})}function base_form(){$("input[type=text], input[type=password], textarea").each(function(){$(this).attr("value")!==""&&$(this).siblings("label").addClass("compact")}).blur(function(){$(this).attr("value")===""&&$(this).siblings("label").removeClass("compact")}).focus(function(){$(this).attr("value")===""&&$(this).siblings("label").addClass("compact")});$("form").each(function(){$(".submit",$(this)).click(function(a){a.preventDefault();$(this).parents("form").submit()});$(this).validate({errorPlacement:function(a,b){if(!b.hasClass("error")){b.parent(".input").jrumble({rotation:0,y:0});b.parent(".input").trigger("startRumble");var c;c=setTimeout(function(){b.parent(".input").trigger("stopRumble")},500)}}})});var a={beforeSubmit:preSubmit,success:postSubmit,dataType:"json"};$("form").ajaxForm(a)}function preSubmit(a,b,c){$(".form-respond",$(b)).show();return!0}function postSubmit(a,b,c,d){if(a.status=="success"){$(".input",d).fadeOut();$(".form-respond",d).removeClass().addClass("form-respond").addClass("success").html(a.message)}else $(".form-respond",d).removeClass().addClass("form-respond").addClass("failed").html(a.message)}function base_additional_markup(){$(".button").append('<div class="bt-shadow"></div>');$(".frame").append('<div class="overlay"></div>');$("#content section").filter(":odd").addClass("odd")}function base_modal(){$("a.modal-image").fancybox({transitionIn:"elastic",overlayOpacity:.8,overlayColor:"#000",opacity:!0,titlePosition:"over",speedOut:150,showCloseButton:!1});$("a.modal-gallery").attr("rel","gallery").fancybox({overlayOpacity:.8,overlayColor:"#000",opacity:!0,titlePosition:"over",speedOut:150,showCloseButton:!1});$("a.modal-youtube").click(function(){$.fancybox({overlayOpacity:.8,overlayColor:"#000",showCloseButton:!1,padding:0,autoScale:!1,transitionIn:"none",transitionOut:"none",title:this.title,width:680,height:495,href:this.href.replace(new RegExp("watch\\?v=","i"),"v/"),type:"swf",swf:{wmode:"transparent",allowfullscreen:"true"}});return!1});$(".modal-vimeo").click(function(){$.fancybox({overlayOpacity:.8,overlayColor:"#000",showCloseButton:!1,padding:0,autoScale:!1,transitionIn:"none",transitionOut:"none",title:this.title,width:400,height:265,href:this.href.replace(new RegExp("([0-9])","i"),"moogaloop.swf?clip_id=$1"),type:"swf"});return!1})}function base_gallery(){var a=$(".gallery-list");a.imagesLoaded(function(){a.masonry({itemSelector:"li",isAnimated:!0})})}function base_twitter(){$("#twitter-box").tweet({join_text:"auto",username:"twitter",avatar_size:0,count:5,page:1,template:"{text} {time}",auto_join_text_default:"we said,",auto_join_text_ed:"we",auto_join_text_ing:"we were",auto_join_text_reply:"we replied",auto_join_text_url:"we were checking out",loading_text:"loading tweets..."}).bind("loaded",function(){var a=$(this).find(".tweet_list"),b=function(){setTimeout(function(){a.find("li:first").animate({marginTop:"-4em"},500,function(){$(this).detach().appendTo(a).removeAttr("style")});b()},8e3)};b()})}function base_custom(){$("#header-toggle").click(function(){$("header").hasClass("active")?$("header").animate({marginTop:"0px"},300,"easeOutQuint").removeClass("active"):$("header").animate({marginTop:"-"+$("header").height()+"px"},300,"easeOutQuint").addClass("active")})}function base_slider(){$(".flexslider").imagesLoaded(function(){$(this).flexslider({animation:"slide",slideshow:!0,slideshowSpeed:7e3,animationDuration:400,controlNav:!0,directionNav:!1,controlsContainer:".slide-control"})})}jQuery(document).ready(function(a){base_additional_markup();base_form();base_toggle();base_tab();base_modal();prettyPrint();a(".tip").tooltip();a(".container").fitVids();base_map();base_custom();base_gallery();base_twitter();base_slider()});